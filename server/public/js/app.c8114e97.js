(function(e){function t(t){for(var a,i,c=t[0],o=t[1],u=t[2],d=0,p=[];d<c.length;d++)i=c[d],s[i]&&p.push(s[i][0]),s[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(p.length)p.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,c=1;c<r.length;c++){var o=r[c];0!==s[o]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},s={app:0},n=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0910":function(e,t,r){},"0cd6":function(e,t,r){"use strict";var a=r("46ab"),s=r.n(a);s.a},2428:function(e,t,r){"use strict";var a=r("0910"),s=r.n(a);s.a},"46ab":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("nav",{staticClass:"light-blue lighten-1",attrs:{role:"navigation"}},[r("div",{staticClass:"nav-wrapper container"},[r("a",{staticClass:"brand-logo left",attrs:{id:"logo-container",href:"/"}},[e._v("Nautilus Store")]),r("ul",{staticClass:"right"},[r("li",[r("router-link",{attrs:{to:{name:"Store"}}},[e._v("Store")])],1),r("li",[r("router-link",{attrs:{to:{name:"MyBasket"}}},[e._v("My Basket")])],1)])])])]),r("router-view")],1)},n=[],i=r("2877"),c={},o=Object(i["a"])(c,s,n,!1,null,null,null),u=o.exports,l=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",{staticClass:"grey-text text-darken-2"},[e._v("Pick a Product!")]),r("h5",{staticClass:"grey-text text-darken-2"},[e._v("...and have a great shopping experience!")]),r("br"),r("br"),e.error?r("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),r("div",{staticClass:"items-container"},[r("div",{staticClass:"row"},e._l(e.items,function(t,a){return r("div",{key:t._id,staticClass:"item",attrs:{item:t,index:a}},[r("div",{staticClass:"col s12 m8"},[r("div",{staticClass:"card horizontal"},[r("div",{staticClass:"card-image"},[r("img",{attrs:{src:t.image}})]),r("div",{staticClass:"card-stacked"},[r("div",{staticClass:"card-content"},[r("h5",[e._v(e._s(t.name))]),r("br"),r("div",{staticClass:"orange-text text-darken-2"},[r("p",[e._v("Price: "+e._s(t.price)+" EUR")])]),r("br"),r("a",{staticClass:"light-blue btn-small",on:{click:function(r){return e.addItem(t)}}},[e._v("Add to basket")])])])])])])}),0)])])},p=[],m=(r("7f7f"),r("96cf"),r("3b8d")),v=r("d225"),f=r("b0b4"),h=r("1052"),g=r.n(h),C="api/",b=function(){function e(){Object(v["a"])(this,e)}return Object(f["a"])(e,null,[{key:"getItems",value:function(){return new Promise(function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(C);case 3:a=e.sent,t(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),r(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,r){return e.apply(this,arguments)}}())}}]),e}(),_=b,k="api/basket/",x=function(){function e(){Object(v["a"])(this,e)}return Object(f["a"])(e,null,[{key:"getItems",value:function(){return new Promise(function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(k);case 3:a=e.sent,t(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),r(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,r){return e.apply(this,arguments)}}())}},{key:"insertItem",value:function(e){return g.a.post(k,e)}},{key:"deleteItem",value:function(e){return g.a.delete("".concat(k).concat(e))}},{key:"emptyBasket",value:function(){return g.a.delete(k)}}]),e}(),y=x,O={name:"Store",data:function(){return{items:[],error:""}},methods:{addItem:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.insertItem({_id:t._id,name:t.name,price:t.price,image:t.image});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.error=e.t0.message;case 8:case"end":return e.stop()}},e,this,[[0,5]])}));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.getItems();case 3:this.items=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=e.t0.message;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()},w=O,P=(r("0cd6"),Object(i["a"])(w,d,p,!1,null,"40db59e4",null)),j=P.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.items.length?r("div",[r("div",{staticClass:"btn grey darken-2 right",on:{click:e.checkout}},[r("span",[e._v("Checkout")])]),r("h4",{staticClass:"grey-text text-darken-2"},[e._v("My Basket")]),r("h5",{staticClass:"grey-text text-darken-2"},[e._v("Total Price: "+e._s(e.price.toFixed(2))+" EUR")]),r("br"),r("div",{staticClass:"row"},[r("div",{staticClass:"input-field col s3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.promoCodes,expression:"promoCodes"}],staticClass:"validate",attrs:{id:"promo-code",type:"text"},domProps:{value:e.promoCodes},on:{input:function(t){t.target.composing||(e.promoCodes=t.target.value)}}}),r("label",{attrs:{for:"promo-code"}},[e._v("PROMO CODE")]),r("span",{staticClass:"helper-text",attrs:{"data-error":"wrong","ta-success":"right"}},[e._v("Insert promo code(s). Use space to  separate.")])]),e.promoApplied?r("div",{staticClass:"input-field col s3"},[r("div",{staticClass:"btn-small light-blue",on:{click:e.removePromo}},[r("span",[e._v("remove")])])]):r("div",{staticClass:"input-field col s3"},[r("div",{staticClass:"btn-small light-blue",on:{click:e.applyPromo}},[r("span",[e._v("apply")])])])]),r("br"),e.error?r("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),r("div",{staticClass:"items-container"},[r("div",{staticClass:"row"},e._l(e.items,function(t,a){return r("div",{key:t._id,staticClass:"item",attrs:{item:t,index:a}},[r("div",{staticClass:"col s12 m8"},[r("div",{staticClass:"card horizontal"},[r("div",{staticClass:"card-image"},[r("img",{attrs:{src:t.image}})]),r("div",{staticClass:"card-stacked"},[r("div",{staticClass:"card-content"},[r("h5",[e._v(e._s(t.name))]),r("br"),r("div",{staticClass:"orange-text text-darken-2"},[r("p",[e._v("Item price: "+e._s(t.price)+" EUR")]),r("p",[e._v("Quantity: "+e._s(t.quantity))])]),r("br"),r("div",{staticClass:"orange-text text-darken-2"},[r("i",{staticClass:"material-icons",on:{click:function(r){return e.addItem(t)}}},[e._v("add")]),e._v("Â \n                    "),r("i",{staticClass:"material-icons",on:{click:function(r){e.removeItem(t)}}},[e._v("remove")])])])])])])])}),0)])]):r("div",[r("h4",{staticClass:"grey-text text-darken-2"},[e._v("Your basket is empty")])])])},R=[],I=(r("28a5"),r("ac6a"),{name:"Basket",data:function(){return{items:[],price:0,promoCodes:"",promoApplied:!1,error:"",used20PercentOff:!1,used5PercentOff:!1,used20EurOff:!1}},methods:{getTotalPrice:function(){var e=0;this.items.forEach(function(t){"Motion sensor"===t.name&&t.quantity>=3?e+=65+(t.quantity-3)*t.price:"Smoke sensor"===t.name&&t.quantity>=2?e+=35(t.quantity-2)*t.price:e+=t.quantity*t.price}),this.price=e},applyPromo:function(){var e=this,t=this.price,r=this.promoCodes.split(" ");r.forEach(function(r){switch(r){case"20%OFF":e.used20PercentOff||(t-=.2*e.price,e.used20PercentOff=!0,e.promoApplied=!0);break;case"5%OFF":if(!e.used5PercentOff){if(t-=.05*t,!e.used20EurOff){var a=e.price-.05*e.price;a-=20,a<t&&(t=a<0?0:a)}e.used5PercentOff=!0,e.promoApplied=!0}break;case"20EUROFF":if(!e.used20EurOff){if(t-=20,e.used5PercentOff){var s=e.price-20;s-=.05*s,s<t&&(t=s<0?0:s)}e.used20EurOff=!0,e.promoApplied=!0}break}}),this.price=t},removePromo:function(){this.getTotalPrice(),this.promoApplied=!1,this.used20PercentOff=!1,this.used5PercentOff=!1,this.used20EurOff=!1,this.promoCodes=""},checkout:function(){Q.push({name:"Checkout",params:{price:this.price}})},addItem:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.insertItem({_id:t._id,name:t.name,price:t.price,image:t.image});case 3:return e.next=5,y.getItems();case 5:this.items=e.sent,this.getTotalPrice(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.error=e.t0.message;case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(t){return e.apply(this,arguments)}return t}(),removeItem:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.deleteItem(t._id);case 3:return e.next=5,y.getItems();case 5:this.items=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.error=e.t0.message;case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getItems();case 3:this.items=e.sent,this.getTotalPrice(),this.promoCodes="",e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.error=e.t0.message;case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}()}),S=I,q=(r("2428"),Object(i["a"])(S,E,R,!1,null,"522b34ec",null)),A=q.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("form",{attrs:{id:"app",method:"post",novalidate:"true"},on:{submit:e.placeOrder}},[r("h4",{staticClass:"grey-text text-darken-2"},[e._v("Checkout")]),r("h5",{staticClass:"grey-text text-darken-2"},[r("strong",[e._v("Total Price: "+e._s(this.$route.params.price.toFixed(2))+" EUR")])]),r("div",{staticClass:"row"},[r("br"),r("h6",{staticClass:"grey-text text-darken-2"},[e._v("Please fill in the data   ")]),r("div",{staticClass:"input-field col s8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"validate",attrs:{id:"email",type:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("label",{attrs:{for:"email"}},[e._v("Email")])]),r("div",{staticClass:"input-field col s8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],staticClass:"validate",attrs:{id:"address",type:"text"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),r("label",{attrs:{for:"address"}},[e._v("Address")])]),r("div",{staticClass:"input-field col s8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.creditCard,expression:"creditCard"}],staticClass:"validate",attrs:{id:"credit-card",type:"text"},domProps:{value:e.creditCard},on:{input:function(t){t.target.composing||(e.creditCard=t.target.value)}}}),r("label",{attrs:{for:"credit-card"}},[e._v("Credit Card Number (16 digits)")])]),r("div",{staticClass:"input-field col s8"},[r("div",{staticClass:"btn light-blue",on:{click:e.placeOrder}},[r("span",[e._v("place order")])])])]),e.errors.length?r("p",{staticClass:"error"},[r("b",[e._v("Please correct the following error(s):")]),r("ul",e._l(e.errors,function(t,a){return r("li",{key:a},[e._v(e._s(t))])}),0)]):e._e()])])},M=[],$=(r("4917"),{data:function(){return{email:"",address:"",creditCard:"",errors:[]}},methods:{placeOrder:function(e){this.checkForm(e)&&(y.emptyBasket(),Q.push({name:"Order"}))},checkForm:function(e){if(this.errors=[],this.address||this.errors.push("Address required."),this.email?this.validEmail(this.email)||this.errors.push("Valid email required."):this.errors.push("Email required."),this.creditCard?this.validCC(this.creditCard)||this.errors.push("Valid credit card number required."):this.errors.push("Credit card number required."),!this.errors.length)return!0;e.preventDefault()},validEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},validCC:function(e){var t=/^(?:[0-9]{16})$/;return!!e.match(t)}}}),T=$,B=(r("7c27"),Object(i["a"])(T,F,M,!1,null,"8d6d4e30",null)),N=B.exports,U=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h4",{staticClass:"grey-text text-darken-2"},[e._v("Congratulations, your order has been placed!")])])}],D={},J=D,V=Object(i["a"])(J,U,z,!1,null,null,null),Z=V.exports;a["a"].use(l["a"]);var Q=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Store",component:j},{path:"/checkout",name:"Checkout",component:N},{path:"/order",name:"Order",component:Z},{path:"/basket",name:"MyBasket",component:A}]}),Y=r("2f62");a["a"].use(Y["a"]);var G=new Y["a"].Store({state:{},mutations:{},actions:{}});a["a"].config.productionTip=!1,new a["a"]({router:Q,store:G,render:function(e){return e(u)}}).$mount("#app")},"62a7":function(e,t,r){},"7c27":function(e,t,r){"use strict";var a=r("62a7"),s=r.n(a);s.a}});
//# sourceMappingURL=app.c8114e97.js.map